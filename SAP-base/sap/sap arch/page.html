<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>SAP Arch</title>
</head><body>Как в любой другой ИС в SAP присутствует архитектура клиет-сервер<br/>
В качестве клиента может выступать SAP GUI для Windows&#09;<br/>
В качестве сервера для больших платформ - &#09;SAP Web Application Server<br/>
<br/>
Архитектура в целом предстает в следющей конфигурации:<ul><li>Процессы представления (отображения, собственно сами клиенты)</li>
<li>Прикладные процессы (понимаю как сервер приложений)</li>
<li>Процессы баз данных (собственно, СУБД)</li>
</ul>
<br/>
Существует как минимум три концепции архитектуры всего комплекса:<br/>
Одноуровневая - база данных, служба приложений, представление - все запускается на одном компьютере. Классическая мэйнфрейм-обработка<br/>
Двухуровневная - разделение на типичную Клиент-Сервер архитектура. Клиент на одном компьютере, сервер и БД на другом.<br/>
Трехуровневая - каждый уровень (Клиент, Служба приложений, БД) запускается на отдельном хосте<br/>
<br/>
Но может быть не только три концептуальных узла в общей системе. Например, в общую систему можно добавить т.н. сервер транзакций Интернета (ITS) [Web Server]<br/>
<br/>
<b>Диспетчер </b>- центральная вычислительная единица - процесс. Распределяет нагрузку, шлет сообщения между узлами системы.<br/>
<b>Буфер - </b>локальная база "неизменяемых" данных. Например, манданты, валюта.<br/>
<br/>
Сервер приложений хранит в себе правила обработки данных на SAP OPEN SQL в ABAP для обмена данными с СУРБД, да да, СУРБД. Но есть также NativeSQL - так называемый родной язык конкретной СУРБД (SQL). Инструкции можно писать как SAP OPEN SQL и запрос пойдет сначала в интерпретатор/интерфейс БД, либо сразу на NativeSQL - напряму к базе данных. В обход интерфейса и буфера.<br/>
Буфер в этом случае - также местная бд для сервера приложений. Своя маленькая бд.<br/>
<br/>
<b>Инстанция</b>&nbsp;- логическая единица системы SAP. Она читает профили, управляет собственными процессами, имеет собственные буферы. Причем все сервисы внутри инстанции запускаются/останавливаются одновременно. SAP как инстанция и SAP Web - одно и тоже.<br/>
<br/>
Пользовательские запросы к системе попадают на сервер приложений и поступают в очередь, первый на входе - первый на выходе, обработки внутреннего диспетчера сервера. Также диалоговый процесс (пользовательский запрос) подтягивает с клиента настройки окружения.<br/>
<br/>
Диспетчер содержит в себе очередь запросов. Запрос принятый в обработку запускает в памяти хоста рабочий процесс<b>.</b>&nbsp;<br/>
<b>Рабочий процес</b>&nbsp;состоит из:<ul><li>Процессор экранов</li>
<li>ABAP-процессор</li>
<li>Интерфейс БД</li>
<li>Обработчик задач</li>
</ul>
<br/>
<b>Тразакция в SAP</b>&nbsp;- объединеные в группы единицы обработки. Другими словами - команда системе. Нпрм, транзакция SU01 - диалговое окно редактирования пользователя. Транзакция всегда выполняется успешно, либо не выполняется вообще. Отличие Транзакции SAP от транзакции СУБД в том, что в SAP это логическая функциональая единица SAP'a включенная в себя несколько рабочих процессов, каждый из которых способен запускать транзакции базы данных.<br/>
<br/>
Помимо <b>блокировки</b>&nbsp;на уровне бд, в SAP есть свои логические блокировки. Так как транзакция содержит в себе рабочие процессы, которые обращены к базе данных. Это необходимо для целосности и однородности информации. Существует два типа блокировок:<ul><li>Монопольные блокировки (Е) - когда на объект налагается полноценная блокировка</li>
<li>Совместные блокировки (S) - когда в транзакции SAP блокировки накладываются на определенные рабочие процессы. Некоторые из общей транзакции могут прододолжать отзываться на запись и чтение.</li>
</ul>
<br/>
в SAP Web Application Server есть собственные таблцы, которые содержат записи и типы блокировок.<br/>
<br/>
Процесс обновление следует понимать как асинхронную обработку данных. По сути это и есть "работа" системы. Когда администратор открывает карточку объекта, делает изменения и сохраняет. Если такая запись существет, то соответственно запись блокируется. Асинохронным здесь следует считать работу нескольких рабочих процессов в одной саптранзакции. <br/>
<br/>
Нужно различать <b>spool SAP</b>&nbsp;системы и <b>spool</b>&nbsp;операционной системы. Две разных службы, но выполняющие одну функцию - напечатать. Первая может обращать к все системе сапа и печатать где нибудь в Гондурасе.<br/>
<br/>
<b>Фоновые задания, запланированные задания</b>&nbsp;- необходимы для долгосрочных транзакций. Например, для переноса данных из внешних систем. Фоновое задание состот из набора заданий. Это может быть как ABAP отчет, так и вызов команды операционной системы. Для запуска и контроля подобных заданий в ОС есть специальный инструмент - sapevt<br/>
<br/>
<b>Мандант</b>&nbsp;- логически организация среди остальных организаций. В каждом манданте есть данные которые нигде более не повторяются:<ul><li>данные зависящие от манданта</li>
<li>пользовательские настройки</li>
<li>репозитарий - центральное хранилище всех объектов разработок ABAP. Каждый репозитарий разделен на пакеты, которые объединены в семантические блоки.</li>
<li></li>
</ul>
<br/>
<b>SAP ITS</b>&nbsp;- web платформа для САП. Используя SAP &nbsp;Web AS управляет данными через браузер.<br/>
<br/>
Варианты установки <b>SAP NetWeaver AS</b>:<ul><li>ABAP</li>
<li>JAVA</li>
<li>ABAP+JAVA</li>
</ul>
<br/>
<b>ОДНА</b>&nbsp;база данных и <b>множество</b>&nbsp;инстанций образуют <b>ЦЕНТРАЛЬНУЮ ИНСТАНЦИЮ. </b>ЦИ может существовать даже если все компоненты SAP установлены на одном хосте.<br/>
<br/>
<b>ABAP MS </b>- служба сообщений в системе SAP. Выполняет приемущественно две задачи:<br/>
1. Распределяет нагрузку с от входящих клиентов.<br/>
2. Подключает определенные рабочие процессы для всех инстанций.<br/>
<br/>
<br/>
<b>SAP Solution Manager - </b>&nbsp;своеобразный централизованный шлюз между всеми объектами SAP. В том числе и оригинальным (немецким). Содержит всю информацию об установленных инстанция пользовательского окружения.<br/>
<br/>
<b>SLD</b>&nbsp;- Каталог системного ландшафта. Содержит всю информацию о ландшафте инстанций. В APAB системах информация о инстанция пересылается через RFC службу. В Java инсталяциях через http.<br/>
<br/>
<b>Рабочий центр (Work Center) </b>- предоставляет центральную рабочую среду со специфичными для роли функциями.<br/>
</body></html>